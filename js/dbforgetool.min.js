var DBForgeTool=function(t){this.DEBUG_MODE=t===!0,this.MAIN_WRAP=$("<div/>"),this.NAME=$("<h1/>"),this.TOOL_WRAP=$("<div/>"),this.TOOL_FORM=$("<form/>"),this.TOOL_LIST=$("<ul/>"),this.TOOL_PLUS=$("<button/>"),this.TOOL_SEND=$("<button/>"),this.TOOL_OUTPUT=$("<textarea/>"),this.TYPE_LIST={type:["INT","VARCHAR","TEXT","REAL","BLOB"],constraint:10,unsigned:[!0,!1],auto_increment:[!0,!1],"null":[!0,!1],unique:[!0,!1],"default":""}};DBForgeTool.prototype.init=function(){this.initWrap(),this.MAIN_WRAP.append(this.NAME,this.TOOL_WRAP),$("body").prepend(this.MAIN_WRAP),this.DEBUG_MODE&&(this.TOOL_OUTPUT.attr("id","dbforge-output"),this.TOOL_WRAP.after(this.TOOL_OUTPUT))},DBForgeTool.prototype.initWrap=function(){this.MAIN_WRAP.attr("id","dbforge-wrap"),this.NAME.attr({id:"dbforge-name","class":"dbforge-title"}).html("SX :: DBForge Query Builder"),this.TOOL_WRAP.attr("id","dbforge-main"),this.TOOL_FORM.attr("id","dbforge-form"),this.TOOL_LIST.attr("id","dbforge-list"),this.TOOL_PLUS.attr("id","dbforge-plus").html("&plus; Add Field"),this.TOOL_SEND.attr({id:"dbforge-send",type:"submit"}).html("Serialize Data"),this.TOOL_FORM.append(this.TOOL_LIST),this.TOOL_WRAP.append(this.TOOL_FORM,this.TOOL_PLUS,this.TOOL_SEND),this.TOOL_PLUS.bind("click",this,this.plusAction),this.TOOL_SEND.bind("click",this,this.submitAction)},DBForgeTool.prototype.submitAction=function(t){if(t=t.data,t.DEBUG_MODE!==!1){var i=t.TOOL_FORM.serializeArray();i=t.serializeOutput(i),console.log(i),t.TOOL_OUTPUT.html(i)}},DBForgeTool.prototype.plusAction=function(t){t=t.data,field=t.fieldMaker(),t.TOOL_LIST.append(field)},DBForgeTool.prototype.serializeOutput=function(t){var e,a={};for(i in t){var o=t[i].name,r=t[i].value;""!==r?"title"==o?(e=r.replace(/(\s)/g,"_").toLowerCase(),a[e]={}):void 0!==e&&("true"==r||"false"==r?a[e][o]="true"==r:a[e][o]=r):"title"==o&&(e=void 0)}return JSON.stringify(a)},DBForgeTool.prototype.fieldMaker=function(){var t,e,a,o,r;t=$("<li/>"),t.addClass((new Date).getTime()),e=$("<span/>").addClass("dbforge-handle").html("&udarr;"),a=$("<input/>").attr({type:"text",name:"title",placeholder:"Field Name"}),r=$("<button/>").addClass("dbforge-delete").attr({type:"button"}).html("&times;"),o=$("<ul/>");for(i in this.TYPE_LIST){var s,n,d,l,O;switch(s=i,n=$("<li/>"),l=s.charAt(0).toUpperCase()+s.slice(1),"type"!=s&&(O=$("<button/>").addClass("dbforge-subs-delete").attr({type:"button"}).html("-")),s){case"default":case"constraint":d=$("<input/>").attr({type:"text",name:s,placeholder:"default"==s?"Default value...":"0, 1, 2, ..."});break;default:d=$("<select/>").attr({name:s});var T,p,h;for(j in this.TYPE_LIST[i])T=$("<option/>"),"boolean"==typeof this.TYPE_LIST[i][j]?(p=this.TYPE_LIST[i][j]===!0?"TRUE":"FALSE",h=this.TYPE_LIST[i][j]):p=h=this.TYPE_LIST[i][j].trim().toUpperCase(),T.attr("value",h).html(p),d.append(T)}n.append(l,d),void 0!=O&&(n.append(O),O.bind("click",n,function(t){t=t.data,t.remove()})),o.append(n)}return t.append(e,r,a,o),r.bind("click",t,function(t){t=t.data,t.remove()}),t};